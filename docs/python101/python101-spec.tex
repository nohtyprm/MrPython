\documentclass[a4paper]{article}

\usepackage{geometry}
\usepackage{fancyhdr}

\usepackage{amsmath}
\usepackage{amssymb}

\renewcommand{\headrulewidth}{0.4pt}
\lhead{Sorbonne Universit\' e -- Informatique}
\pagestyle{fancy}
\rhead{\thepage}
\fancyfoot{}

\usepackage{proof}
\usepackage{colonequals}

\newenvironment{program}{
\begin{sffamily}
\begin{scriptsize}
\begin{tabbing}}
{\end{tabbing}
\end{scriptsize}
\end{sffamily}}

\newcommand{\kw}[1]{\textsf{\textbf{#1}}}
\newcommand{\cmt}[1]{\textsf{\textit{#1}}}
\newcommand{\code}[1]{\begin{sffamily}#1\end{sffamily}}
\newcommand{\pindent}{\hspace{2em}\=}

\newcommand{\defs}{\stackrel{{\scriptscriptstyle \mathsf{def}}}{=}}
\newcommand{\defmin}{\stackrel{{\scriptscriptstyle \mathsf{min}}}{=}}
\newcommand{\colcol}{\coloncolon}

\newcommand{\yield}{\Rrightarrow}

\begin{document}

\setlength{\parskip}{1ex}
\setlength{\parindent}{0mm}


\title{Python101 language specification}

\author{Alexandre Doussot, Christopher Trublereau, Fr\' ed\' eric Peschanski\\
Sorbonne Universit\' e}

\date{\today}

\maketitle
\begin{abstract}
TODO
\end{abstract}

\thispagestyle{fancy}

\section{Introduction}

TODO

\section{Syntax}

TODO

\subsection{Programs}

TODO

\begin{program}
\cmt{\# imports ...}\\
$\cdots$\\
\kw{def} function$_1$(arg$_{1_1}$, \ldots, arg$_{1_m}$):\\
\pindent \cmt{\# function$_1$ body}\\
\\
$\cdots$ \\
\\
\kw{def} function$_n$(arg$_{n_1}$, \ldots, arg$_{n_m}$):\\
\> \cmt{\# function$_n$ body}\\
\\
$\cdots$\\
\cmt{\# tests ...} \\
\end{program}

\subsection{Functions}

TODO

\subsection{Instructions}

TODO

\subsection{Expressions}

TODO

\section{Type system}

\vspace{1\baselineskip}

$\infer[\text{(true)}]%
{\Delta;\Gamma \vdash \kw{True} \yield \kw{bool}}%
{}$

\vspace{3\baselineskip}

$\infer[\text{(false)}]%
{\Delta;\Gamma \vdash \kw{False} \yield \kw{bool}}%
{}$

\vspace{3\baselineskip}


$\infer[\text{(var)}]%
{\Delta;\Gamma, \kw{x:t}~ \vdash x \yield \kw{t}}%
{}$

\vspace{3\baselineskip}

$\infer[\text{(not)}]%
{\Delta;\Gamma \vdash \kw{not}~e \yield \kw{bool}}%
{\Delta;\Gamma \vdash e \colcol \kw{bool} & \kw{not}:\kw{bool}\rightarrow\kw{bool}\in \Delta}$

\vspace{3\baselineskip}

$\infer[\text{(and)}]%
{\Delta;\Gamma \vdash \kw{and}~\textrm{e}_\textrm{1},~\textrm{e}_\textrm{2} \yield \kw{bool}}%
{\Delta;\Gamma \vdash \textrm{e}_\textrm{1} \colcol \kw{bool}~~ \Delta;\Gamma \vdash\textrm{e}_\textrm{2} \colcol \kw{bool} & \kw{and}:\kw{bool}\times\kw{bool}\rightarrow\kw{bool}\in \Delta}$

\vspace{3\baselineskip}

$\infer[\text{(app)}]%
{\Delta;\Gamma \vdash f(\textrm{e}_\textrm{1},...,\textrm{e}_\textrm{n}) \yield \kw{t}}%
{\Delta;\Gamma \vdash \textrm{e}_\textrm{1} \colcol \kw{t}_\kw{1}~...~ \Delta;\Gamma \vdash \textrm{e}_\textrm{n} \colcol \kw{t}_\kw{n} & f:\kw{t}_\kw{1}\times ... \times\kw{t}_\kw{n}\rightarrow\kw{t}\in \Delta}$

\vspace{30\baselineskip}


\begin{tabular}{p{.5\textwidth}p{.5\textwidth}}

\flushleft $\infer[\text{(var)}]%
{~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~}%
{}$

\hspace{11\baselineskip} $\infer[\text{(var)}]%
{~~~~~~~~~}%
{}$

$\infer[\text{(check)}]%
{}%
{\Delta; \Gamma \vdash x \yield \kw{int} ~~ \kw{int} = _\textrm{?} \kw{int}}$

\hspace{11\baselineskip} $\infer[\text{(check)}]%
{}%
{y \yield \kw{int}}$

$\infer[\text{(app)}]%
{}%
{\Delta; \Gamma \vdash x \colcol \kw{int} && \Delta; \Gamma \vdash y \colcol int \geqslant \in \Delta}$

& \flushright $\infer[\text{(var)}]%
{}%
{y : \kw{int} \in \Gamma}$

$\infer[\text{(check)}]%
{}%
{\Delta; \Gamma \vdash y \yield \kw{int} ~~~ \kw{int} = _\textrm{crash} T_\textrm{int}}$

$\infer[\text{(assign)}]%
{}%
{mx : T_\textrm{int} \in \Gamma ~~~~ \Delta; \Gamma \vdash y \colcol T}$

$\infer[\text{(seq+assign)}]%
{}%
{\Delta; \Gamma \vdash mx = y \yield \kw{NameType} \dashv \Gamma ' = \Gamma}$

\end{tabular}

$\infer[\text{(max)}]%
{\Delta[\geqslant : \kw{int} \times \kw{int} \rightarrow \kw{bool}]~ ; ~ \Gamma[\textrm{x}: \kw{int}, \textrm{y}: \kw{int}, \textrm{mx}: \kw{int}] ~~ \vdash ~ if(x \geqslant y)\{mx = y\} \yield \kw{NameType} ~ \dashv ~  \Gamma '}%
{\Delta; \Gamma ~ \vdash ~ x \geqslant y \yield T_\textrm{bool} ~~~ \Delta; \Gamma ~ \vdash ~ T_\textrm{bool} = _\textrm{warning} \kw{bool} && \Delta; \Gamma ~ \vdash ~ \{mx = y\} \yield \kw{NameType} ~ \dashv ~ \Gamma '}$

\end{document}
